-- Combat Power Booster Script for Delta Executor
-- Meningkatkan Combat Power hingga ratusan triliun (PERSISTENT)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Player = Players.LocalPlayer

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local CloseButton = Instance.new("TextButton")
local MinimizeButton = Instance.new("TextButton")
local ArmsButton = Instance.new("TextButton")
local LegsButton = Instance.new("TextButton")
local BackButton = Instance.new("TextButton")
local AgilityButton = Instance.new("TextButton")
local AutoTrainButton = Instance.new("TextButton")
local MultiplierLabel = Instance.new("TextLabel")
local MultiplierInput = Instance.new("TextBox")
local StatusLabel = Instance.new("TextLabel")
local CPLabel = Instance.new("TextLabel")

-- Variables
local isMinimized = false
local isAutoTraining = false
local multiplier = 1000000000000 -- 1 Triliun sebagai default
local currentCP = 0
local trainValues = {0, 0, 0, 0} -- Arms, Legs, Back, Agility

-- GUI Properties
ScreenGui.Name = "CombatPowerBoosterGUI"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
MainFrame.BorderSizePixel = 2
MainFrame.BorderColor3 = Color3.fromRGB(0, 170, 255)
MainFrame.Position = UDim2.new(0.35, 0, 0.25, 0)
MainFrame.Size = UDim2.new(0, 350, 0, 450)
MainFrame.Active = true
MainFrame.Draggable = true

Title.Name = "Title"
Title.Parent = MainFrame
Title.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
Title.Size = UDim2.new(1, 0, 0, 35)
Title.Font = Enum.Font.GothamBold
Title.Text = "Combat Power Booster"
Title.TextColor3 = Color3.fromRGB(0, 170, 255)
Title.TextSize = 16

CloseButton.Name = "CloseButton"
CloseButton.Parent = MainFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
CloseButton.Position = UDim2.new(1, -30, 0, 5)
CloseButton.Size = UDim2.new(0, 25, 0, 25)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 14

MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Parent = MainFrame
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
MinimizeButton.Position = UDim2.new(1, -60, 0, 5)
MinimizeButton.Size = UDim2.new(0, 25, 0, 25)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Text = "-"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 18

MultiplierLabel.Name = "MultiplierLabel"
MultiplierLabel.Parent = MainFrame
MultiplierLabel.BackgroundTransparency = 1
MultiplierLabel.Position = UDim2.new(0, 10, 0, 45)
MultiplierLabel.Size = UDim2.new(1, -20, 0, 25)
MultiplierLabel.Font = Enum.Font.Gotham
MultiplierLabel.Text = "Multiplier (nilai hasil training):"
MultiplierLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
MultiplierLabel.TextSize = 12
MultiplierLabel.TextXAlignment = Enum.TextXAlignment.Left

MultiplierInput.Name = "MultiplierInput"
MultiplierInput.Parent = MainFrame
MultiplierInput.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
MultiplierInput.BorderColor3 = Color3.fromRGB(0, 170, 255)
MultiplierInput.Position = UDim2.new(0, 10, 0, 75)
MultiplierInput.Size = UDim2.new(1, -20, 0, 35)
MultiplierInput.Font = Enum.Font.Gotham
MultiplierInput.PlaceholderText = "Masukkan multiplier (contoh: 1000000000000)"
MultiplierInput.Text = "1000000000000"
MultiplierInput.TextColor3 = Color3.fromRGB(255, 255, 255)
MultiplierInput.TextSize = 12

ArmsButton.Name = "ArmsButton"
ArmsButton.Parent = MainFrame
ArmsButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
ArmsButton.Position = UDim2.new(0, 10, 0, 120)
ArmsButton.Size = UDim2.new(0.48, -10, 0, 40)
ArmsButton.Font = Enum.Font.GothamBold
ArmsButton.Text = "Boost Arms"
ArmsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ArmsButton.TextSize = 14

LegsButton.Name = "LegsButton"
LegsButton.Parent = MainFrame
LegsButton.BackgroundColor3 = Color3.fromRGB(100, 255, 100)
LegsButton.Position = UDim2.new(0.52, 0, 0, 120)
LegsButton.Size = UDim2.new(0.48, -10, 0, 40)
LegsButton.Font = Enum.Font.GothamBold
LegsButton.Text = "Boost Legs"
LegsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
LegsButton.TextSize = 14

BackButton.Name = "BackButton"
BackButton.Parent = MainFrame
BackButton.BackgroundColor3 = Color3.fromRGB(100, 100, 255)
BackButton.Position = UDim2.new(0, 10, 0, 170)
BackButton.Size = UDim2.new(0.48, -10, 0, 40)
BackButton.Font = Enum.Font.GothamBold
BackButton.Text = "Boost Back"
BackButton.TextColor3 = Color3.fromRGB(255, 255, 255)
BackButton.TextSize = 14

AgilityButton.Name = "AgilityButton"
AgilityButton.Parent = MainFrame
AgilityButton.BackgroundColor3 = Color3.fromRGB(255, 255, 100)
AgilityButton.Position = UDim2.new(0.52, 0, 0, 170)
AgilityButton.Size = UDim2.new(0.48, -10, 0, 40)
AgilityButton.Font = Enum.Font.GothamBold
AgilityButton.Text = "Boost Agility"
AgilityButton.TextColor3 = Color3.fromRGB(0, 0, 0)
AgilityButton.TextSize = 14

AutoTrainButton.Name = "AutoTrainButton"
AutoTrainButton.Parent = MainFrame
AutoTrainButton.BackgroundColor3 = Color3.fromRGB(100, 200, 255)
AutoTrainButton.Position = UDim2.new(0, 10, 0, 220)
AutoTrainButton.Size = UDim2.new(1, -20, 0, 50)
AutoTrainButton.Font = Enum.Font.GothamBold
AutoTrainButton.Text = "Start Auto Train All"
AutoTrainButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoTrainButton.TextSize = 16

CPLabel.Name = "CPLabel"
CPLabel.Parent = MainFrame
CPLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
CPLabel.BorderColor3 = Color3.fromRGB(0, 255, 100)
CPLabel.BorderSizePixel = 2
CPLabel.Position = UDim2.new(0, 10, 0, 280)
CPLabel.Size = UDim2.new(1, -20, 0, 50)
CPLabel.Font = Enum.Font.GothamBold
CPLabel.Text = "Combat Power: 0"
CPLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
CPLabel.TextSize = 14

StatusLabel.Name = "StatusLabel"
StatusLabel.Parent = MainFrame
StatusLabel.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
StatusLabel.Position = UDim2.new(0, 10, 0, 340)
StatusLabel.Size = UDim2.new(1, -20, 0, 100)
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.Text = "Status: Ready\n\nKlik button untuk boost element!"
StatusLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
StatusLabel.TextSize = 11
StatusLabel.TextYAlignment = Enum.TextYAlignment.Top
StatusLabel.TextWrapped = true

-- Functions
local function UpdateStatus(message)
    StatusLabel.Text = "Status: " .. message
end

local function FormatNumber(num)
    if num >= 1e15 then
        return string.format("%.2fQ", num / 1e15) -- Quadrillion
    elseif num >= 1e12 then
        return string.format("%.2fT", num / 1e12) -- Trillion
    elseif num >= 1e9 then
        return string.format("%.2fB", num / 1e9) -- Billion
    elseif num >= 1e6 then
        return string.format("%.2fM", num / 1e6) -- Million
    else
        return tostring(math.floor(num))
    end
end

local function SendToServer(trainType, elementName)
    local success = pcall(function()
        local mult = tonumber(MultiplierInput.Text) or multiplier
        trainValues[trainType] = trainValues[trainType] + mult
        
        -- Method 1: TrainSpeedHasChanged (Untuk speed training)
        local TrainSpeedHasChanged = ReplicatedStorage:FindFirstChild("TrainSystem")
            and ReplicatedStorage.TrainSystem:FindFirstChild("Remote")
            and ReplicatedStorage.TrainSystem.Remote:FindFirstChild("TrainSpeedHasChanged")
        
        if TrainSpeedHasChanged then
            TrainSpeedHasChanged:FireServer(trainType)
        end
        
        -- Method 2: ApplyStationaryTrain (Training stasioner)
        local ApplyStationaryTrain = ReplicatedStorage:FindFirstChild("TrainEquipment")
            and ReplicatedStorage.TrainEquipment:FindFirstChild("Remote")
            and ReplicatedStorage.TrainEquipment.Remote:FindFirstChild("ApplyStationaryTrain")
        
        if ApplyStationaryTrain then
            ApplyStationaryTrain:InvokeServer()
        end
        
        -- Method 3: PlayerTrainValueHasChanged (Update nilai training)
        local PlayerTrainValueHasChanged = ReplicatedStorage:FindFirstChild("TrainSystem")
            and ReplicatedStorage.TrainSystem:FindFirstChild("Bindable")
            and ReplicatedStorage.TrainSystem.Bindable:FindFirstChild("PlayerTrainValueHasChanged")
        
        if PlayerTrainValueHasChanged then
            PlayerTrainValueHasChanged:Fire(
                Player,
                trainType,
                trainValues[trainType],
                trainValues[trainType] - mult
            )
        end
    end)
    
    return success
end

local function CalculateCombatPower()
    local totalCP = 0
    for i = 1, 4 do
        totalCP = totalCP + trainValues[i]
    end
    return totalCP
end

local function UpdateCombatPower()
    pcall(function()
        currentCP = CalculateCombatPower()
        CPLabel.Text = "Combat Power: " .. FormatNumber(currentCP)
        
        -- Method 1: PlayerCombatPowerHasChanged (Remote)
        local PlayerCombatPowerHasChanged = ReplicatedStorage:FindFirstChild("TrainSystem")
            and ReplicatedStorage.TrainSystem:FindFirstChild("Remote")
            and ReplicatedStorage.TrainSystem.Remote:FindFirstChild("PlayerCombatPowerHasChanged")
        
        if PlayerCombatPowerHasChanged then
            firesignal(PlayerCombatPowerHasChanged.OnClientEvent, Player, currentCP)
        end
        
        -- Method 2: PlayerCombatPowerHasChanged (Bindable)
        local PlayerCombatPowerBindable = ReplicatedStorage:FindFirstChild("TrainSystem")
            and ReplicatedStorage.TrainSystem:FindFirstChild("Bindable")
            and ReplicatedStorage.TrainSystem.Bindable:FindFirstChild("PlayerCombatPowerHasChanged")
        
        if PlayerCombatPowerBindable then
            PlayerCombatPowerBindable:Fire(Player, currentCP)
        end
        
        -- Method 3: StatisticsDataHasChanged
        local StatisticsDataHasChanged = ReplicatedStorage:FindFirstChild("Statistics")
            and ReplicatedStorage.Statistics:FindFirstChild("Remote")
            and ReplicatedStorage.Statistics.Remote:FindFirstChild("StatisticsDataHasChanged")
        
        if StatisticsDataHasChanged then
            firesignal(StatisticsDataHasChanged.OnClientEvent, currentCP, 1)
        end
    end)
end

local function BoostTrainingValue(trainType, elementName)
    local success = SendToServer(trainType, elementName)
    
    if success then
        UpdateCombatPower()
        local mult = tonumber(MultiplierInput.Text) or multiplier
        UpdateStatus(elementName .. " ++" .. FormatNumber(mult) .. "\nTotal: " .. FormatNumber(trainValues[trainType]))
    else
        UpdateStatus("Error boosting " .. elementName)
    end
end

-- Persistent Combat Power Loop
spawn(function()
    while wait(0.5) do
        if currentCP > 0 then
            UpdateCombatPower()
        end
    end
end)

-- Button Functions
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

MinimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    if isMinimized then
        MainFrame.Size = UDim2.new(0, 350, 0, 35)
        MinimizeButton.Text = "+"
    else
        MainFrame.Size = UDim2.new(0, 350, 0, 450)
        MinimizeButton.Text = "-"
    end
end)

ArmsButton.MouseButton1Click:Connect(function()
    BoostTrainingValue(1, "Arms")
end)

LegsButton.MouseButton1Click:Connect(function()
    BoostTrainingValue(2, "Legs")
end)

BackButton.MouseButton1Click:Connect(function()
    BoostTrainingValue(3, "Back")
end)

AgilityButton.MouseButton1Click:Connect(function()
    BoostTrainingValue(4, "Agility")
end)

AutoTrainButton.MouseButton1Click:Connect(function()
    isAutoTraining = not isAutoTraining
    
    if isAutoTraining then
        AutoTrainButton.Text = "Stop Auto Train"
        AutoTrainButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
        UpdateStatus("Auto Training: ACTIVE\nBoosting continuously...")
        
        spawn(function()
            while isAutoTraining do
                BoostTrainingValue(1, "Arms")
                wait(0.2)
                BoostTrainingValue(2, "Legs")
                wait(0.2)
                BoostTrainingValue(3, "Back")
                wait(0.2)
                BoostTrainingValue(4, "Agility")
                wait(0.4)
            end
        end)
    else
        AutoTrainButton.Text = "Start Auto Train All"
        AutoTrainButton.BackgroundColor3 = Color3.fromRGB(100, 200, 255)
        UpdateStatus("Auto Training: STOPPED\nCP: " .. FormatNumber(currentCP))
    end
end)

UpdateStatus("Script loaded!\n\nMultiplier: " .. FormatNumber(multiplier) .. "\n\nSiap boost Combat Power!")

print("Combat Power Booster V2 loaded!")
print("Persistent system active - CP akan terus bertambah!")
