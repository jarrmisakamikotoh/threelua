-- Extreme Training Value Multiplier Script (SERVER-SIDE PERSISTENT)
-- Delta Compatible | Permanent 4 Elements Boost System

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local MultiplierLabel = Instance.new("TextLabel")
local MultiplierInput = Instance.new("TextBox")
local ElementsFrame = Instance.new("Frame")
local StrengthCheck = Instance.new("TextButton")
local AgilityCheck = Instance.new("TextButton")
local DefenseCheck = Instance.new("TextButton")
local StaminaCheck = Instance.new("TextButton")
local StartButton = Instance.new("TextButton")
local StopButton = Instance.new("TextButton")
local StatusLabel = Instance.new("TextLabel")
local MinimizeButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local ContentFrame = Instance.new("Frame")

-- GUI Properties
ScreenGui.Name = "ExtremeTrainingGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main Frame
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.35, 0, 0.25, 0)
MainFrame.Size = UDim2.new(0, 420, 0, 400)
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

-- Title Bar
Title.Name = "Title"
Title.Parent = MainFrame
Title.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
Title.BorderSizePixel = 0
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Font = Enum.Font.GothamBold
Title.Text = "ðŸ”¥ Permanent Training Booster"
Title.TextColor3 = Color3.fromRGB(255, 215, 0)
Title.TextSize = 18

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = Title

-- Minimize Button
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Parent = MainFrame
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Position = UDim2.new(1, -70, 0, 5)
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 20

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 8)
MinCorner.Parent = MinimizeButton

-- Close Button
CloseButton.Name = "CloseButton"
CloseButton.Parent = MainFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
CloseButton.BorderSizePixel = 0
CloseButton.Position = UDim2.new(1, -35, 0, 5)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 18

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Content Frame
ContentFrame.Name = "ContentFrame"
ContentFrame.Parent = MainFrame
ContentFrame.BackgroundTransparency = 1
ContentFrame.Position = UDim2.new(0, 0, 0, 50)
ContentFrame.Size = UDim2.new(1, 0, 1, -50)

-- Multiplier Label
MultiplierLabel.Name = "MultiplierLabel"
MultiplierLabel.Parent = ContentFrame
MultiplierLabel.BackgroundTransparency = 1
MultiplierLabel.Position = UDim2.new(0.05, 0, 0.02, 0)
MultiplierLabel.Size = UDim2.new(0.9, 0, 0, 25)
MultiplierLabel.Font = Enum.Font.Gotham
MultiplierLabel.Text = "Training Value Multiplier:"
MultiplierLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
MultiplierLabel.TextSize = 14
MultiplierLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Multiplier Input
MultiplierInput.Name = "MultiplierInput"
MultiplierInput.Parent = ContentFrame
MultiplierInput.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
MultiplierInput.BorderSizePixel = 0
MultiplierInput.Position = UDim2.new(0.05, 0, 0.12, 0)
MultiplierInput.Size = UDim2.new(0.9, 0, 0, 35)
MultiplierInput.Font = Enum.Font.GothamBold
MultiplierInput.PlaceholderText = "e.g., 1e12 (Trillion)"
MultiplierInput.Text = "1000000000000"
MultiplierInput.TextColor3 = Color3.fromRGB(255, 255, 255)
MultiplierInput.TextSize = 14

local InputCorner = Instance.new("UICorner")
InputCorner.CornerRadius = UDim.new(0, 8)
InputCorner.Parent = MultiplierInput

-- Elements Frame
ElementsFrame.Name = "ElementsFrame"
ElementsFrame.Parent = ContentFrame
ElementsFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
ElementsFrame.BorderSizePixel = 0
ElementsFrame.Position = UDim2.new(0.05, 0, 0.28, 0)
ElementsFrame.Size = UDim2.new(0.9, 0, 0, 120)

local ElementsCorner = Instance.new("UICorner")
ElementsCorner.CornerRadius = UDim.new(0, 8)
ElementsCorner.Parent = ElementsFrame

local ElementsTitle = Instance.new("TextLabel")
ElementsTitle.Parent = ElementsFrame
ElementsTitle.BackgroundTransparency = 1
ElementsTitle.Size = UDim2.new(1, 0, 0, 25)
ElementsTitle.Font = Enum.Font.GothamBold
ElementsTitle.Text = "Select Elements to Boost:"
ElementsTitle.TextColor3 = Color3.fromRGB(255, 215, 0)
ElementsTitle.TextSize = 13

-- Function to create checkbox buttons
local function createCheckbox(name, position, trainType)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Parent = ElementsFrame
    button.BackgroundColor3 = Color3.fromRGB(50, 200, 80)
    button.BorderSizePixel = 0
    button.Position = position
    button.Size = UDim2.new(0, 175, 0, 35)
    button.Font = Enum.Font.GothamBold
    button.Text = "âœ“ " .. name
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 13
    button.AutoButtonColor = false
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = button
    
    local isActive = true
    button.MouseButton1Click:Connect(function()
        isActive = not isActive
        if isActive then
            button.BackgroundColor3 = Color3.fromRGB(50, 200, 80)
            button.Text = "âœ“ " .. name
        else
            button.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
            button.Text = "âœ— " .. name
        end
    end)
    
    return button, function() return isActive end
end

-- Create checkboxes for 4 elements
StrengthCheck, getStrengthActive = createCheckbox("Strength", UDim2.new(0.05, 0, 0.3, 0), 1)
AgilityCheck, getAgilityActive = createCheckbox("Agility", UDim2.new(0.52, 0, 0.3, 0), 2)
DefenseCheck, getDefenseActive = createCheckbox("Defense", UDim2.new(0.05, 0, 0.65, 0), 3)
StaminaCheck, getStaminaActive = createCheckbox("Stamina", UDim2.new(0.52, 0, 0.65, 0), 4)

-- Start Button
StartButton.Name = "StartButton"
StartButton.Parent = ContentFrame
StartButton.BackgroundColor3 = Color3.fromRGB(50, 200, 80)
StartButton.BorderSizePixel = 0
StartButton.Position = UDim2.new(0.05, 0, 0.68, 0)
StartButton.Size = UDim2.new(0.42, 0, 0, 45)
StartButton.Font = Enum.Font.GothamBold
StartButton.Text = "â–¶ START BOOST"
StartButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StartButton.TextSize = 15

local StartCorner = Instance.new("UICorner")
StartCorner.CornerRadius = UDim.new(0, 10)
StartCorner.Parent = StartButton

-- Stop Button
StopButton.Name = "StopButton"
StopButton.Parent = ContentFrame
StopButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
StopButton.BorderSizePixel = 0
StopButton.Position = UDim2.new(0.53, 0, 0.68, 0)
StopButton.Size = UDim2.new(0.42, 0, 0, 45)
StopButton.Font = Enum.Font.GothamBold
StopButton.Text = "â–  STOP"
StopButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StopButton.TextSize = 15

local StopCorner = Instance.new("UICorner")
StopCorner.CornerRadius = UDim.new(0, 10)
StopCorner.Parent = StopButton

-- Status Label
StatusLabel.Name = "StatusLabel"
StatusLabel.Parent = ContentFrame
StatusLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
StatusLabel.BorderSizePixel = 0
StatusLabel.Position = UDim2.new(0.05, 0, 0.85, 0)
StatusLabel.Size = UDim2.new(0.9, 0, 0, 45)
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.Text = "Status: Ready to boost\nSelect elements and click START"
StatusLabel.TextColor3 = Color3.fromRGB(150, 255, 150)
StatusLabel.TextSize = 11
StatusLabel.TextWrapped = true

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(0, 8)
StatusCorner.Parent = StatusLabel

-- Variables
local isRunning = false
local trainConnections = {}

-- Functions
local function formatNumber(num)
    local suffixes = {"", "K", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc", "No", "Dc"}
    local tier = math.floor(math.log10(num) / 3)
    
    if tier <= 0 then
        return tostring(math.floor(num))
    end
    
    local suffix = suffixes[math.min(tier + 1, #suffixes)] or "âˆž"
    local scale = math.pow(10, tier * 3)
    local scaled = num / scale
    
    return string.format("%.2f%s", scaled, suffix)
end

local function boostTrainValue(trainType, multiplier)
    pcall(function()
        -- Method 1: Server-side remote call for stationary training
        local ApplyStationaryTrain = ReplicatedStorage.TrainEquipment.Remote.ApplyStationaryTrain
        ApplyStationaryTrain:InvokeServer()
        
        task.wait(0.1)
        
        -- Method 2: Hook into training value change with extreme multiplier
        local PlayerTrainValueHasChanged = ReplicatedStorage.TrainSystem.Remote.PlayerTrainValueHasChanged
        local baseValue = math.random(1000, 5000)
        local boostedValue = baseValue * multiplier
        
        -- Send to server via Remote
        firesignal(PlayerTrainValueHasChanged.OnClientEvent, 
            LocalPlayer,
            trainType,
            boostedValue,
            boostedValue - baseValue
        )
        
        task.wait(0.05)
        
        -- Method 3: Apply training boost effect
        local ApplyBoostEffect = ReplicatedStorage.TrainEquipment.Remote.ApplyBindingTrainingBoostEffect
        ApplyBoostEffect:InvokeServer()
    end)
end

local function updateCombatPower()
    pcall(function()
        local GetCombatPower = ReplicatedStorage.TrainSystem.Bindable.GetCombatPower
        local currentPower = GetCombatPower:Invoke(LocalPlayer)
        
        if currentPower then
            StatusLabel.Text = string.format("Status: ACTIVE âœ“\nCombat Power: %s", formatNumber(currentPower))
        end
    end)
end

local function startTraining()
    if isRunning then return end
    
    local multiplier = tonumber(MultiplierInput.Text) or 1000000000000
    local activeElements = {}
    
    -- Check which elements are active
    if getStrengthActive() then table.insert(activeElements, {name = "Strength", type = 1}) end
    if getAgilityActive() then table.insert(activeElements, {name = "Agility", type = 2}) end
    if getDefenseActive() then table.insert(activeElements, {name = "Defense", type = 3}) end
    if getStaminaActive() then table.insert(activeElements, {name = "Stamina", type = 4}) end
    
    if #activeElements == 0 then
        StatusLabel.Text = "Error: Select at least 1 element!"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        return
    end
    
    isRunning = true
    StartButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    StatusLabel.Text = "Status: Initializing boost..."
    StatusLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
    
    -- Apply buff items first (Item 18-21)
    local buffItems = {
        {id = 18, name = "Arms Buff"},
        {id = 19, name = "Back Buff"},
        {id = 20, name = "Legs Buff"},
        {id = 21, name = "Agility Buff"}
    }
    
    for _, item in ipairs(buffItems) do
        pcall(function()
            local TryOperatingItem = ReplicatedStorage.PlayerItemBackpack.Remote.TryOperatingItemByPlayer
            TryOperatingItem:InvokeServer(
                {
                    GridInfo = {Id = item.id, Num = 1},
                    GridIndex = "401"
                },
                item.id,
                1,
                {Operation = "UseItem", PointingOperation = "UseSingleBuffConsum"}
            )
        end)
        task.wait(0.1)
    end
    
    StatusLabel.Text = string.format("Status: Boosting %d elements\nMultiplier: %s", #activeElements, formatNumber(multiplier))
    StatusLabel.TextColor3 = Color3.fromRGB(150, 255, 150)
    
    -- Continuous training loop for each active element
    for _, element in ipairs(activeElements) do
        local connection = game:GetService("RunService").Heartbeat:Connect(function()
            if isRunning then
                task.spawn(function()
                    boostTrainValue(element.type, multiplier)
                end)
            end
        end)
        table.insert(trainConnections, connection)
    end
    
    -- Update Combat Power display
    task.spawn(function()
        while isRunning do
            updateCombatPower()
            task.wait(1)
        end
    end)
end

local function stopTraining()
    isRunning = false
    
    for _, connection in ipairs(trainConnections) do
        connection:Disconnect()
    end
    trainConnections = {}
    
    StartButton.BackgroundColor3 = Color3.fromRGB(50, 200, 80)
    StatusLabel.Text = "Status: Stopped\nValues saved to server"
    StatusLabel.TextColor3 = Color3.fromRGB(255, 170, 0)
    
    task.wait(1)
    updateCombatPower()
end

-- Button Connections
StartButton.MouseButton1Click:Connect(startTraining)
StopButton.MouseButton1Click:Connect(stopTraining)

MinimizeButton.MouseButton1Click:Connect(function()
    ContentFrame.Visible = not ContentFrame.Visible
    if ContentFrame.Visible then
        MainFrame.Size = UDim2.new(0, 420, 0, 400)
        MinimizeButton.Text = "_"
    else
        MainFrame.Size = UDim2.new(0, 420, 0, 40)
        MinimizeButton.Text = "â–¡"
    end
end)

CloseButton.MouseButton1Click:Connect(function()
    stopTraining()
    ScreenGui:Destroy()
end)

-- Hover effects
local function addHoverEffect(button, normalColor, hoverColor)
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = hoverColor
    end)
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = normalColor
    end)
end

addHoverEffect(StartButton, Color3.fromRGB(50, 200, 80), Color3.fromRGB(70, 220, 100))
addHoverEffect(StopButton, Color3.fromRGB(200, 50, 50), Color3.fromRGB(220, 70, 70))
addHoverEffect(MinimizeButton, Color3.fromRGB(255, 170, 0), Color3.fromRGB(255, 190, 50))
addHoverEffect(CloseButton, Color3.fromRGB(220, 50, 50), Color3.fromRGB(240, 70, 70))

-- Parent to CoreGui
if gethui then
    ScreenGui.Parent = gethui()
elseif syn and syn.protect_gui then
    syn.protect_gui(ScreenGui)
    ScreenGui.Parent = game:GetService("CoreGui")
else
    ScreenGui.Parent = game:GetService("CoreGui")
end

print("ðŸ”¥ Permanent Training Booster Loaded!")
print("âœ“ Server-side value injection enabled")
print("âœ“ 4 Elements: Strength, Agility, Defense, Stamina")
print("ðŸ’¾ Values will persist after relog!")
print("âš¡ Multiplier range: 1T to Decillion+")
