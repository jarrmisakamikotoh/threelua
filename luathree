-- Extreme Training Booster - TRUE SERVER PERSISTENCE
-- Based on MAXIMUM OVERDRIVE method - Multiply server returns

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local MultiplierLabel = Instance.new("TextLabel")
local MultiplierInput = Instance.new("TextBox")
local StartButton = Instance.new("TextButton")
local StatusLabel = Instance.new("TextLabel")
local GainsLabel = Instance.new("TextLabel")
local InfoLabel = Instance.new("TextLabel")
local MinimizeButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local ContentFrame = Instance.new("Frame")

-- GUI Properties
ScreenGui.Name = "ExtremeTrainingGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main Frame
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.35, 0, 0.3, 0)
MainFrame.Size = UDim2.new(0, 420, 0, 420)
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

-- Title Bar
Title.Name = "Title"
Title.Parent = MainFrame
Title.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
Title.BorderSizePixel = 0
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Font = Enum.Font.GothamBold
Title.Text = "ðŸ”¥ Server Return Multiplier"
Title.TextColor3 = Color3.fromRGB(255, 215, 0)
Title.TextSize = 18

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = Title

-- Minimize Button
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Parent = MainFrame
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Position = UDim2.new(1, -70, 0, 5)
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 20

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 8)
MinCorner.Parent = MinimizeButton

-- Close Button
CloseButton.Name = "CloseButton"
CloseButton.Parent = MainFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
CloseButton.BorderSizePixel = 0
CloseButton.Position = UDim2.new(1, -35, 0, 5)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 18

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Content Frame
ContentFrame.Name = "ContentFrame"
ContentFrame.Parent = MainFrame
ContentFrame.BackgroundTransparency = 1
ContentFrame.Position = UDim2.new(0, 0, 0, 50)
ContentFrame.Size = UDim2.new(1, 0, 1, -50)

-- Info Label (TOP)
InfoLabel.Name = "InfoLabel"
InfoLabel.Parent = ContentFrame
InfoLabel.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
InfoLabel.BorderSizePixel = 0
InfoLabel.Position = UDim2.new(0.05, 0, 0.02, 0)
InfoLabel.Size = UDim2.new(0.9, 0, 0, 100)
InfoLabel.Font = Enum.Font.Gotham
InfoLabel.Text = "ðŸ’¡ TRUE SERVER PERSISTENCE!\n\n1. Click ACTIVATE HOOK\n2. Train in-game (Arms/Legs/etc)\n3. Server returns get MULTIPLIED\n4. Values SAVE to server permanently!\n5. Works after relog!"
InfoLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
InfoLabel.TextSize = 12
InfoLabel.TextWrapped = true
InfoLabel.TextYAlignment = Enum.TextYAlignment.Top

local InfoCorner = Instance.new("UICorner")
InfoCorner.CornerRadius = UDim.new(0, 8)
InfoCorner.Parent = InfoLabel

-- Multiplier Label
MultiplierLabel.Name = "MultiplierLabel"
MultiplierLabel.Parent = ContentFrame
MultiplierLabel.BackgroundTransparency = 1
MultiplierLabel.Position = UDim2.new(0.05, 0, 0.32, 0)
MultiplierLabel.Size = UDim2.new(0.9, 0, 0, 25)
MultiplierLabel.Font = Enum.Font.Gotham
MultiplierLabel.Text = "Server Return Multiplier:"
MultiplierLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
MultiplierLabel.TextSize = 14
MultiplierLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Multiplier Input
MultiplierInput.Name = "MultiplierInput"
MultiplierInput.Parent = ContentFrame
MultiplierInput.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
MultiplierInput.BorderSizePixel = 0
MultiplierInput.Position = UDim2.new(0.05, 0, 0.4, 0)
MultiplierInput.Size = UDim2.new(0.9, 0, 0, 45)
MultiplierInput.Font = Enum.Font.GothamBold
MultiplierInput.PlaceholderText = "Start low: 1000 or 10000"
MultiplierInput.Text = "10000"
MultiplierInput.TextColor3 = Color3.fromRGB(255, 255, 255)
MultiplierInput.TextSize = 18

local InputCorner = Instance.new("UICorner")
InputCorner.CornerRadius = UDim.new(0, 8)
InputCorner.Parent = MultiplierInput

-- Gains Label
GainsLabel.Name = "GainsLabel"
GainsLabel.Parent = ContentFrame
GainsLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
GainsLabel.BorderSizePixel = 0
GainsLabel.Position = UDim2.new(0.05, 0, 0.54, 0)
GainsLabel.Size = UDim2.new(0.9, 0, 0, 70)
GainsLabel.Font = Enum.Font.GothamBold
GainsLabel.Text = "ðŸ’Ž Multiplied Returns: 0\nðŸ“¡ Server Requests: 0\nðŸ”¥ Total Gains: +0"
GainsLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
GainsLabel.TextSize = 13
GainsLabel.TextWrapped = true
GainsLabel.TextYAlignment = Enum.TextYAlignment.Top

local GainsCorner = Instance.new("UICorner")
GainsCorner.CornerRadius = UDim.new(0, 8)
GainsCorner.Parent = GainsLabel

-- Start Button
StartButton.Name = "StartButton"
StartButton.Parent = ContentFrame
StartButton.BackgroundColor3 = Color3.fromRGB(50, 200, 80)
StartButton.BorderSizePixel = 0
StartButton.Position = UDim2.new(0.05, 0, 0.73, 0)
StartButton.Size = UDim2.new(0.9, 0, 0, 55)
StartButton.Font = Enum.Font.GothamBlack
StartButton.Text = "ðŸš€ ACTIVATE HOOK"
StartButton.TextColor3 = Color3.fromRGB(255, 255, 255)
StartButton.TextSize = 20

local StartCorner = Instance.new("UICorner")
StartCorner.CornerRadius = UDim.new(0, 12)
StartCorner.Parent = StartButton

local StartStroke = Instance.new("UIStroke")
StartStroke.Color = Color3.fromRGB(150, 255, 150)
StartStroke.Thickness = 4
StartStroke.Parent = StartButton

-- Status Label
StatusLabel.Name = "StatusLabel"
StatusLabel.Parent = ContentFrame
StatusLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
StatusLabel.BorderSizePixel = 0
StatusLabel.Position = UDim2.new(0.05, 0, 0.88, 0)
StatusLabel.Size = UDim2.new(0.9, 0, 0, 40)
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.Text = "Status: Ready to hook\nClick ACTIVATE to start"
StatusLabel.TextColor3 = Color3.fromRGB(150, 255, 150)
StatusLabel.TextSize = 12
StatusLabel.TextWrapped = true

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(0, 8)
StatusCorner.Parent = StatusLabel

-- Variables
local isHooked = false
local Stats = {
    MultipliedReturns = 0,
    ServerRequests = 0,
    TotalGains = 0
}

-- Functions
local function formatNumber(num)
    local suffixes = {"", "K", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc", "No", "Dc"}
    local tier = math.floor(math.log10(math.abs(num) + 1) / 3)
    
    if tier <= 0 then
        return tostring(math.floor(num))
    end
    
    local suffix = suffixes[math.min(tier + 1, #suffixes)] or "âˆž"
    local scale = math.pow(10, tier * 3)
    local scaled = num / scale
    
    return string.format("%.2f%s", scaled, suffix)
end

local function updateStats()
    GainsLabel.Text = string.format(
        "ðŸ’Ž Multiplied Returns: %s\nðŸ“¡ Server Requests: %s\nðŸ”¥ Total Gains: +%s",
        formatNumber(Stats.MultipliedReturns),
        formatNumber(Stats.ServerRequests),
        formatNumber(Stats.TotalGains)
    )
end

local function setupServerHook()
    if isHooked then return end
    
    local multiplier = tonumber(MultiplierInput.Text) or 10000
    
    -- THE KEY: Hook __namecall and multiply SERVER RETURN VALUES
    local oldNamecall
    oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
        local method = getnamecallmethod()
        local args = {...}
        
        -- Intercept InvokeServer - MULTIPLY RETURNS (like MAXIMUM OVERDRIVE)
        if method == "InvokeServer" then
            Stats.ServerRequests = Stats.ServerRequests + 1
            
            -- Call original function
            local results = {pcall(oldNamecall, self, unpack(args))}
            local success = table.remove(results, 1)
            
            if success and isHooked then
                -- MULTIPLY ALL NUMERIC RETURNS FROM SERVER
                for i, result in ipairs(results) do
                    if typeof(result) == "number" and result > 0 and result < 1e12 then
                        local originalValue = result
                        results[i] = result * multiplier
                        
                        local gain = results[i] - originalValue
                        Stats.TotalGains = Stats.TotalGains + gain
                        Stats.MultipliedReturns = Stats.MultipliedReturns + 1
                        
                        -- Log for debugging
                        print(string.format("âœ… Multiplied: %d â†’ %s (x%s)", 
                            math.floor(originalValue), 
                            formatNumber(results[i]), 
                            formatNumber(multiplier)))
                    end
                end
            end
            
            if not success then
                return oldNamecall(self, ...)
            end
            
            return unpack(results)
        end
        
        -- Also intercept FireServer for complete coverage
        if method == "FireServer" and isHooked then
            Stats.ServerRequests = Stats.ServerRequests + 1
            
            -- Multiply numeric arguments going TO server
            for i, arg in ipairs(args) do
                if typeof(arg) == "number" and arg > 0 and arg < 1e12 then
                    args[i] = arg * multiplier
                end
            end
            
            return oldNamecall(self, unpack(args))
        end
        
        return oldNamecall(self, ...)
    end)
    
    isHooked = true
    
    print("âœ… SERVER HOOK INSTALLED!")
    print("ðŸ“Š Multiplier: x" .. formatNumber(multiplier))
    print("ðŸŽ¯ Now train in-game to see multiplied gains!")
end

local function activateHook()
    if isHooked then
        StatusLabel.Text = "âš ï¸ Hook already active!\nTrain in-game to see results"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
        return
    end
    
    local multiplier = tonumber(MultiplierInput.Text)
    
    if not multiplier or multiplier < 1 then
        StatusLabel.Text = "Error: Invalid multiplier!\nEnter a number â‰¥ 1"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        return
    end
    
    StatusLabel.Text = "Status: Installing hook...\nPlease wait..."
    StatusLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
    
    task.wait(0.5)
    
    setupServerHook()
    
    StartButton.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
    StartButton.Text = "âœ… HOOK ACTIVE!"
    StartStroke.Color = Color3.fromRGB(0, 255, 100)
    
    StatusLabel.Text = string.format(
        "Status: HOOK ACTIVE! âœ“\nMultiplier: x%s\nTrain now to multiply gains!",
        formatNumber(multiplier)
    )
    StatusLabel.TextColor3 = Color3.fromRGB(0, 255, 100)
    
    -- Apply buff items
    task.spawn(function()
        task.wait(1)
        local buffItems = {18, 19, 20, 21}
        for _, itemId in ipairs(buffItems) do
            pcall(function()
                local TryOperatingItem = ReplicatedStorage.PlayerItemBackpack.Remote.TryOperatingItemByPlayer
                TryOperatingItem:InvokeServer(
                    {
                        GridInfo = {Id = itemId, Num = 1},
                        GridIndex = "401"
                    },
                    itemId,
                    1,
                    {Operation = "UseItem", PointingOperation = "UseSingleBuffConsum"}
                )
            end)
            task.wait(0.1)
        end
        print("âœ… Buff items applied")
    end)
    
    -- Stats updater
    task.spawn(function()
        while task.wait(0.5) do
            if isHooked then
                updateStats()
            end
        end
    end)
end

-- Button Connections
StartButton.MouseButton1Click:Connect(activateHook)

MinimizeButton.MouseButton1Click:Connect(function()
    ContentFrame.Visible = not ContentFrame.Visible
    if ContentFrame.Visible then
        MainFrame.Size = UDim2.new(0, 420, 0, 420)
        MinimizeButton.Text = "_"
    else
        MainFrame.Size = UDim2.new(0, 420, 0, 40)
        MinimizeButton.Text = "â–¡"
    end
end)

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Hover effects
StartButton.MouseEnter:Connect(function()
    if not isHooked then
        StartButton.BackgroundColor3 = Color3.fromRGB(70, 220, 100)
    end
end)

StartButton.MouseLeave:Connect(function()
    if not isHooked then
        StartButton.BackgroundColor3 = Color3.fromRGB(50, 200, 80)
    end
end)

MinimizeButton.MouseEnter:Connect(function()
    MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 190, 50)
end)

MinimizeButton.MouseLeave:Connect(function()
    MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
end)

CloseButton.MouseEnter:Connect(function()
    CloseButton.BackgroundColor3 = Color3.fromRGB(240, 70, 70)
end)

CloseButton.MouseLeave:Connect(function()
    CloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
end)

-- Parent to CoreGui
if gethui then
    ScreenGui.Parent = gethui()
elseif syn and syn.protect_gui then
    syn.protect_gui(ScreenGui)
    ScreenGui.Parent = game:GetService("CoreGui")
else
    ScreenGui.Parent = game:GetService("CoreGui")
end

print("ðŸ’¥ ========================================")
print("ðŸ’¥ SERVER RETURN MULTIPLIER - LOADED!")
print("ðŸ’¥ ========================================")
print("")
print("ðŸŽ¯ HOW IT WORKS (Same as MAXIMUM OVERDRIVE):")
print("  1. Hooks __namecall to intercept server calls")
print("  2. When you train Arms/Legs/etc in-game:")
print("     â†’ Server says: 'You gained +100 Arms'")
print("     â†’ Hook multiplies: 100 Ã— 10,000 = 1,000,000")
print("     â†’ Your Arms stat gets +1 MILLION!")
print("  3. Server SAVES the multiplied value")
print("  4. Values PERSIST after relog!")
print("")
print("âš¡ USAGE:")
print("  1. Set multiplier (start with 10000)")
print("  2. Click 'ACTIVATE HOOK'")
print("  3. Train in-game (Arms/Legs/Back/etc)")
print("  4. Watch stats EXPLODE!")
print("  5. Values save permanently to server")
print("")
print("âš ï¸ TIPS:")
print("  â€¢ Start with x10,000 multiplier")
print("  â€¢ If it works, try x100,000 or x1,000,000")
print("  â€¢ Watch console for 'Multiplied' messages")
print("  â€¢ Stats WILL save to server!")
print("")
print("ðŸš€ Ready to multiply server returns!")
